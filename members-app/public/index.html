<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    input, button { margin: 5px; padding: 5px; }
    table { border-collapse: collapse; margin-top: 20px; width: 300px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #eee; }
  </style>
</head>
<body>

  <h2>ğŸ‘¤ íšŒì› ì •ë³´ ì…ë ¥</h2>
  <input type="text" id="user-id" placeholder="ì•„ì´ë””">
  <input type="text" id="user-phone" placeholder="ì „í™”ë²ˆí˜¸">
  <button id="add-member">ì…ë ¥</button>

  <br><br>
  <button id="load-users">íšŒì› ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°</button>

  <table id="user-table" style="display: none;">
    <thead>
      <tr>
        <th>ì•„ì´ë””</th>
        <th>ì „í™”ë²ˆí˜¸</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    $('#add-member').on('click', function () {
      const id = $('#user-id').val().trim();
      const phone = $('#user-phone').val().trim();

      if (!id || !phone) return alert('ì•„ì´ë””ì™€ ì „í™”ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');

      $.ajax({
        url: '/add-member',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ id, phone }),
        success: function () {
          alert('âœ… íšŒì› ì¶”ê°€ ì™„ë£Œ!');
          $('#user-id').val('');
          $('#user-phone').val('');
        },
        error: function () {
          alert('âŒ ì¶”ê°€ ì‹¤íŒ¨!');
        }
      });
    });

    $('#load-users').on('click', function () {
      $.ajax({
        url: '/members',
        method: 'GET',
        dataType: 'json',
        success: function (data) {
          const tbody = $('#user-table tbody');
          tbody.empty();
          data.forEach(member => {
            const row = `<tr><td>${member.id}</td><td>${member.phone}</td></tr>`;
            tbody.append(row);
          });
          $('#user-table').show();
        },
        error: function () {
          alert('ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨');
        }
      });
    });
  </script>

</body>
</html>
